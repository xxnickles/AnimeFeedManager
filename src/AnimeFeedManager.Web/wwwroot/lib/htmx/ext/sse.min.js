!function(){var g;function e(t){return new EventSource(t,{withCredentials:!0})}function a(t){return t.trim().split(/\s+/)}function r(f){i(f,"sse-swap").forEach(function(o){var i=g.getClosestMatch(o,E);if(null==i)return null;var t,u=g.getInternalData(i).sseEventSource,e=g.getAttributeValue(o,"sse-swap");t=e?e.split(","):function(t){var t=g.getAttributeValue(t,"hx-sse"),e=[];if(null!=t)for(var n=a(t),r=0;r<n.length;r++){var s=n[r].split(/:(.+)/);"swap"===s[0]&&e.push(s[1])}return e}(o);for(var n=0;n<t.length;n++){var c=t[n].trim(),l=function(t){var e,n,r,s,a;v(i)||(g.bodyContains(o)?g.triggerEvent(f,"htmx:sseBeforeMessage",t)&&(e=o,n=t.data,g.withExtensions(e,function(t){n=t.transformResponse(n,null,e)}),r=g.getSwapSpecification(e),s=g.getTarget(e),a=g.makeSettleInfo(e),g.selectAndSwap(r.swapStyle,s,e,n,a),a.elts.forEach(function(t){t.classList&&t.classList.add(htmx.config.settlingClass),g.triggerEvent(t,"htmx:beforeSettle")}),0<r.settleDelay?setTimeout(h(a),r.settleDelay):h(a)(),g.triggerEvent(f,"htmx:sseMessage",t)):u.removeEventListener(c,l))};g.getInternalData(o).sseEventListener=l,u.addEventListener(c,l)}}),i(f,"hx-trigger").forEach(function(t){var e=g.getClosestMatch(t,E);if(null==e)return null;g.getInternalData(e).sseEventSource;e=g.getAttributeValue(t,"hx-trigger");null!=e&&"sse:"==e.slice(0,4)&&(e=e.substr(4))})}function s(t,n){null!=t&&(i(t,"sse-connect").forEach(function(t){var e=g.getAttributeValue(t,"sse-connect");null!=e&&o(t,e,n)}),i(t,"hx-sse").forEach(function(t){var e=function(t){if(t=g.getAttributeValue(t,"hx-sse"))for(var e=a(t),n=0;n<e.length;n++){var r=e[n].split(/:(.+)/);if("connect"===r[0])return r[1]}}(t);null!=e&&o(t,e,n)}),r(t))}function o(e,t,n){var r=htmx.createEventSource(t);r.onerror=function(t){g.triggerErrorEvent(e,"htmx:sseError",{error:t,source:r}),v(e)||r.readyState===EventSource.CLOSED&&(n=n||0,t=Math.random()*(2^n)*500,window.setTimeout(function(){s(e,Math.min(7,n+1))},t))},r.onopen=function(t){g.triggerEvent(e,"htmx:sseOpen",{source:r})},g.getInternalData(e).sseEventSource=r}function v(t){if(!g.bodyContains(t)){t=g.getInternalData(t).sseEventSource;if(null!=t)return t.close(),1}}function i(t,e){var n=[];return g.hasAttribute(t,e)&&n.push(t),t.querySelectorAll("["+e+"], [data-"+e+"]").forEach(function(t){n.push(t)}),n}function h(t){return function(){t.tasks.forEach(function(t){t.call()}),t.elts.forEach(function(t){t.classList&&t.classList.remove(htmx.config.settlingClass),g.triggerEvent(t,"htmx:afterSettle")})}}function E(t){return null!=g.getInternalData(t).sseEventSource}htmx.defineExtension("sse",{init:function(t){g=t,null==htmx.createEventSource&&(htmx.createEventSource=e)},onEvent:function(t,e){var n=e.target||e.detail.elt;switch(t){case"htmx:beforeCleanupElement":var r=g.getInternalData(n);return void(r.sseEventSource&&r.sseEventSource.close());case"htmx:afterProcessNode":s(n)}}})}();